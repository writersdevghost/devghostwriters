---
import Navbar from "../components/Navbar.jsx";
import "../styles/global.css";
import Footer from "../components/Footer.jsx";
import navi from "../assets/navi.png";
import CookieConsent from "../components/CookieConcent";
import favicon from "../assets/favicon.png";
---

<html lang="en" style="scrollbar-width: none;">
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href={favicon.src} />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script>
      (function (d, t) {
        var BASE_URL = "https://app.chatwoot.com";
        var g = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
        g.src = BASE_URL + "/packs/js/sdk.js";
        g.defer = true;
        g.async = true;
        s.parentNode.insertBefore(g, s);
        g.onload = function () {
          window.chatwootSDK.run({
            websiteToken: "TYGv6tZttxCEwhcpJNoFCMMb",
            baseUrl: BASE_URL,
          });
        };
      })(document, "script");
    </script>

    <style>
      .smoke-wrapper {
        position: relative;
        z-index: 50;
      }

      .smoke-effect {
        position: absolute;
        bottom: 100%;
        left: 50%;
        width: 1px;
        height: 180px;
        transform: translateX(-50%);
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .smoke-wrapper:hover .smoke-effect {
        opacity: 1;
      }

      .smoke-effect::before,
      .smoke-effect::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 30px;
        height: 30px;
        background: #ddd;
        border-radius: 50%;
        filter: blur(10px);
        transform: translateX(-50%);
      }

      .smoke-effect::before {
        animation: riseFade 3s ease-out infinite;
        animation-delay: 0s;
      }

      .smoke-effect::after {
        animation: riseFade 3s ease-out infinite;
        animation-delay: 1.5s;
      }

      .smoke-trail {
        position: absolute;
        bottom: 0;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #ddd;
        filter: blur(10px);
        transform: translateX(-50%);
      }

      .smoke-trail:nth-child(1) {
        animation: riseFade 3s ease-out infinite;
        animation-delay: 0.5s;
      }

      .smoke-trail:nth-child(2) {
        animation: riseFade 3s ease-out infinite;
        animation-delay: 1s;
      }

      .smoke-trail:nth-child(3) {
        animation: riseFade 3s ease-out infinite;
        animation-delay: 2s;
      }

      @keyframes riseFade {
        0% {
          bottom: 0;
          opacity: 0.7;
          width: 20px;
          height: 20px;
          margin-left: 0;
        }
        50% {
          opacity: 0.5;
          width: 35px;
          height: 35px;
          margin-left: 10px;
        }
        100% {
          bottom: 180px;
          opacity: 0;
          width: 50px;
          height: 50px;
          margin-left: -10px;
        }
      }

      .social-media-bar {
        position: fixed;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        z-index: 100;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.75rem;
        background: #00adb5;
        backdrop-filter: blur(8px);
        border-radius: 1rem 0 0 1rem;
        transition: transform 0.3s ease-in-out;
      }

      .social-media-bar.collapsed {
        transform: translateY(-50%) translateX(100%);
      }

      .social-media-bar .toggle-btn {
        position: absolute;
        left: -2.5rem;
        top: 50%;
        transform: translateY(-50%);
        width: 2rem;
        height: 5rem;
        background: #00adb5;
        backdrop-filter: blur(8px);
        border-radius: 0.5rem 0 0 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .social-media-bar .toggle-btn:hover {
        background: #017177;
      }

      .social-media-bar .toggle-btn::after {
        content: ">";
        color: white;
        font-size: 1.2rem;
        transition: transform 0.3s ease;
      }

      .social-media-bar.collapsed .toggle-btn::after {
        transform: rotate(180deg);
      }

      .social-icon {
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        background: #1e293b;
      }

      .social-icon::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
          circle at center,
          rgba(255, 255, 255, 0.2) 0%,
          transparent 70%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .social-icon:hover::before {
        opacity: 1;
      }

      .social-icon img,
      .social-icon i {
        width: 1.5rem;
        height: 1.5rem;
        z-index: 2;
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
      }

      .social-icon:hover {
        transform: translateY(-3px);
        box-shadow:
          0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      .social-icon:hover img,
      .social-icon:hover i {
        transform: scale(1.1);
      }

      .social-icon.facebook {
        background: #1877f2;
      }

      .social-icon.twitter {
        background: #1da1f2;
      }

      .social-icon.youtube {
        background: #ff0000;
      }

      .social-icon.linkedin {
        background: #0a66c2;
      }

      .social-tooltip {
        position: absolute;
        left: 100%;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(15, 23, 42, 0.9);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        white-space: nowrap;
        pointer-events: none;
        opacity: 0;
        transition:
          opacity 0.3s ease,
          transform 0.3s ease;
        transform-origin: left center;
        transform: translateY(-50%) translateX(10px) scale(0.95);
        z-index: 5;
      }

      .social-icon:hover .social-tooltip {
        opacity: 1;
        transform: translateY(-50%) translateX(10px) scale(1);
      }
    </style>
  </head>
  <body>
    <Navbar client:load />
    <main class="min-h-screen">
      <slot />
    </main>
    <Footer client:load />
    <CookieConsent client:load />

    <div id="socialMediaBar" class="social-media-bar">
      <div class="toggle-btn" id="socialToggle"></div>

      <a
        href="https://www.facebook.com/devghostwriter/"
        target="_blank"
        rel="noopener noreferrer"
        class="social-icon facebook"
        aria-label="Facebook"
      >
        <i class="fab fa-facebook-f text-white"></i>
        <span class="social-tooltip">Follow us on Facebook</span>
      </a>

      <a
        href="http://x.com/i/flow/login?redirect_after_login=%2FDevghostWriter"
        target="_blank"
        rel="noopener noreferrer"
        class="social-icon twitter"
        aria-label="Twitter"
      >
        <i class="fab fa-twitter text-white"></i>
        <span class="social-tooltip">Follow us on Twitter</span>
      </a>

      <a
        href="https://www.youtube.com/@DevghostWriters"
        target="_blank"
        rel="noopener noreferrer"
        class="social-icon youtube"
        aria-label="YouTube"
      >
        <i class="fab fa-youtube text-white"></i>
        <span class="social-tooltip">Subscribe on YouTube</span>
      </a>

      <a
        href="https://www.pinterest.com/devghostwriters/"
        target="_blank"
        rel="noopener noreferrer"
        class="social-icon pinterest"
        aria-label="Pinterest"
      >
        <i class="fab fa-pinterest-p text-white"></i>
        <span class="social-tooltip">Follow us on Pinterest</span>
      </a>

      <a
        href="https://linkedin.com/company/your-company"
        target="_blank"
        rel="noopener noreferrer"
        class="social-icon linkedin"
        aria-label="LinkedIn"
      >
        <i class="fab fa-linkedin-in text-white"></i>
        <span class="social-tooltip">Connect on LinkedIn</span>
      </a>
    </div>

    <div
      id="scrollToTopBtn"
      class="fixed right-8 bottom-[-100px] opacity-0 transition-all duration-300"
    >
      <div class="smoke-wrapper">
        <div class="smoke-effect">
          <div class="smoke-trail"></div>
          <div class="smoke-trail"></div>
          <div class="smoke-trail"></div>
        </div>

        <button
          id="scrollTopButton"
          aria-label="Scroll to top"
          class="w-12 h-12 rounded-full p-0 flex items-center justify-center focus:outline-none hover:scale-110 transition-transform"
        >
          <img
            src={navi.src}
            alt="Scroll to top"
            class="w-full h-full object-contain"
          />
        </button>
      </div>
    </div>

    <script>
      let scrollTimeout = null;
      let isHovering = false;
      const scrollBtn = document.getElementById("scrollToTopBtn");
      const button = document.getElementById("scrollTopButton");

      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      }

      function handleScroll() {
        if (window.scrollY > 300) {
          scrollBtn.classList.remove("bottom-[-100px]", "opacity-0");
          scrollBtn.classList.add("bottom-20", "opacity-100");

          if (!isHovering) {
            if (scrollTimeout) {
              clearTimeout(scrollTimeout);
            }

            scrollTimeout = setTimeout(() => {
              if (!isHovering && window.scrollY > 300) {
                scrollBtn.classList.remove("bottom-20", "opacity-100");
                scrollBtn.classList.add("bottom-[-100px]", "opacity-0");
              }
            }, 2000);
          }
        } else {
          scrollBtn.classList.remove("bottom-20", "opacity-100");
          scrollBtn.classList.add("bottom-[-100px]", "opacity-0");
        }
      }

      function handleMouseEnter() {
        isHovering = true;
        if (scrollTimeout) {
          clearTimeout(scrollTimeout);
          scrollTimeout = null;
        }
      }

      function handleMouseLeave() {
        isHovering = false;
        scrollTimeout = setTimeout(() => {
          if (window.scrollY > 300) {
            scrollBtn.classList.remove("bottom-20", "opacity-100");
            scrollBtn.classList.add("bottom-[-100px]", "opacity-0");
          }
        }, 2000);
      }

      const socialMediaBar = document.getElementById("socialMediaBar");
      const socialToggle = document.getElementById("socialToggle");

      socialToggle.addEventListener("click", () => {
        socialMediaBar.classList.toggle("collapsed");

        const isCollapsed = socialMediaBar.classList.contains("collapsed");
        localStorage.setItem("socialBarCollapsed", isCollapsed);
      });

      document.addEventListener("DOMContentLoaded", () => {
        window.addEventListener("scroll", handleScroll);

        button.addEventListener("click", scrollToTop);
        button.addEventListener("mouseenter", handleMouseEnter);
        button.addEventListener("mouseleave", handleMouseLeave);

        const isCollapsed =
          localStorage.getItem("socialBarCollapsed") === "true";
        if (isCollapsed) {
          socialMediaBar.classList.add("collapsed");
        }

        setTimeout(() => {
          socialMediaBar.style.transition = "transform 0.3s ease-in-out";
        }, 500);
      });
    </script>
  </body>
</html>
